{
  "name": "ğŸ¯ SOLOMOND AI Master Orchestrator",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "solomond-ai-trigger",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "master_trigger",
      "name": "ğŸš€ SOLOMOND ìš”ì²­ ìˆ˜ì‹ ",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [240, 400]
    },
    {
      "parameters": {
        "jsCode": "// ğŸ§  SOLOMOND AI ì§€ëŠ¥ì  ìš”ì²­ ë¶„ì„ ë° ë¼ìš°íŒ… ê²°ì •\nconst requestData = $input.first().json;\n\n// 1. ìš”ì²­ íƒ€ì… ë¶„ì„\nconst fileTypes = requestData.files ? requestData.files.map(f => f.type || 'unknown') : [];\nconst hasAudio = fileTypes.some(t => t.includes('audio'));\nconst hasImage = fileTypes.some(t => t.includes('image'));\nconst hasVideo = fileTypes.some(t => t.includes('video'));\nconst hasText = requestData.text_content || requestData.description;\nconst hasUrl = requestData.url;\n\n// 2. ì§€ëŠ¥ì  ëª¨ë“ˆ ì„ íƒ ë¡œì§\nlet selectedModule = 'module1'; // ê¸°ë³¸ê°’\nlet aiModel = 'qwen2.5:7b'; // ê¸°ë³¸ ëª¨ë¸\nlet analysisStrategy = 'standard';\nlet reasoning = [];\n\n// ğŸ¯ Module 1: ì»¨í¼ëŸ°ìŠ¤ ë¶„ì„ (ê¸°ë³¸)\nif (hasAudio || hasVideo || (hasImage && requestData.context === 'conference')) {\n  selectedModule = 'module1';\n  aiModel = 'qwen2.5:7b';\n  analysisStrategy = 'multimodal_conference';\n  reasoning.push('ìŒì„±/ì˜ìƒ íŒŒì¼ ê°ì§€ â†’ ì»¨í¼ëŸ°ìŠ¤ ë¶„ì„ ëª¨ë“ˆ ì„ íƒ');\n  reasoning.push('qwen2.5:7b ì„ íƒ ì´ìœ : ë¹ ë¥¸ íšŒì˜ ë¶„ì„ì— ìµœì í™”');\n}\n\n// ğŸ•·ï¸ Module 2: ì›¹ í¬ë¡¤ëŸ¬  \nelse if (hasUrl || (hasText && requestData.source === 'web')) {\n  selectedModule = 'module2';\n  aiModel = 'qwen2.5:7b';\n  analysisStrategy = 'web_content_analysis';\n  reasoning.push('URL ë˜ëŠ” ì›¹ ì½˜í…ì¸  ê°ì§€ â†’ ì›¹ í¬ë¡¤ëŸ¬ ëª¨ë“ˆ ì„ íƒ');\n  reasoning.push('qwen2.5:7b ì„ íƒ ì´ìœ : ë‰´ìŠ¤ ìš”ì•½ ë° ë²ˆì—­ì— íŠ¹í™”');\n}\n\n// ğŸ’ Module 3: ë³´ì„ ë¶„ì„\nelse if (hasImage && (requestData.context === 'gemstone' || requestData.keywords?.includes('ë³´ì„'))) {\n  selectedModule = 'module3';\n  aiModel = 'qwen2.5:7b';\n  analysisStrategy = 'gemstone_identification';\n  reasoning.push('ë³´ì„ ì´ë¯¸ì§€ ê°ì§€ â†’ ë³´ì„ ë¶„ì„ ëª¨ë“ˆ ì„ íƒ');\n  reasoning.push('qwen2.5:7b ì„ íƒ ì´ìœ : ë³´ì„ ì „ë¬¸ ë¶„ì„ ë° ì‚°ì§€ ì‹ë³„');\n}\n\n// ğŸ—ï¸ Module 4: 3D CAD ë³€í™˜\nelse if (hasImage && requestData.context === '3d_cad') {\n  selectedModule = 'module4';\n  aiModel = 'llama3.2:3b';\n  analysisStrategy = 'image_to_cad';\n  reasoning.push('3D CAD ë³€í™˜ ìš”ì²­ ê°ì§€ â†’ CAD ëª¨ë“ˆ ì„ íƒ');\n  reasoning.push('llama3.2:3b ì„ íƒ ì´ìœ : ë¹ ë¥¸ ì´ë¯¸ì§€ ì²˜ë¦¬ì— ìµœì í™”');\n}\n\n// 3. ë¶„ì„ íŒŒë¼ë¯¸í„° ì„¤ì •\nconst analysisConfig = {\n  temperature: selectedModule === 'module4' ? 0.5 : 0.7, // CADëŠ” ì •í™•ì„± ìš°ì„ \n  max_tokens: selectedModule === 'module3' ? 1500 : 2000, // ë³´ì„ ë¶„ì„ì€ ê°„ê²°í•˜ê²Œ\n  use_dual_brain: true, // ëª¨ë“  ëª¨ë“ˆì—ì„œ ë“€ì–¼ ë¸Œë ˆì¸ í™œì„±í™”\n  google_calendar_integration: requestData.save_to_calendar !== false\n};\n\n// 4. ìš°ì„ ìˆœìœ„ ë° ë¦¬ì†ŒìŠ¤ í• ë‹¹\nlet priority = 'normal';\nif (requestData.urgent || fileTypes.length > 10) {\n  priority = 'high';\n} else if (requestData.batch_mode) {\n  priority = 'low';\n}\n\n// 5. ë§ˆìŠ¤í„° ê²°ì • ê²°ê³¼\nconst masterDecision = {\n  timestamp: new Date().toISOString(),\n  request_id: requestData.id || Date.now().toString(),\n  routing_decision: {\n    selected_module: selectedModule,\n    ai_model: aiModel,\n    analysis_strategy: analysisStrategy,\n    reasoning: reasoning\n  },\n  analysis_config: analysisConfig,\n  resource_allocation: {\n    priority: priority,\n    estimated_time: selectedModule === 'module1' ? '5-10ë¶„' : '2-5ë¶„',\n    memory_requirement: selectedModule === 'module4' ? 'high' : 'medium'\n  },\n  file_analysis: {\n    total_files: fileTypes.length,\n    file_types: fileTypes,\n    has_audio: hasAudio,\n    has_image: hasImage,\n    has_video: hasVideo\n  },\n  next_workflow: `solomond-${selectedModule}-detailed`,\n  original_request: requestData\n};\n\nreturn masterDecision;"
      },
      "id": "intelligent_router",
      "name": "ğŸ§  ì§€ëŠ¥ì  ëª¨ë“ˆ ë¼ìš°í„°",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 400]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.routing_decision.selected_module }}",
              "rightValue": "module1",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "route_module1",
      "name": "ğŸ“Š Module1 ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 200]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.routing_decision.selected_module }}",
              "rightValue": "module2",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "route_module2",
      "name": "ğŸ•·ï¸ Module2 ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 350]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.routing_decision.selected_module }}",
              "rightValue": "module3",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "route_module3",
      "name": "ğŸ’ Module3 ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 500]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.routing_decision.selected_module }}",
              "rightValue": "module4",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "route_module4",
      "name": "ğŸ—ï¸ Module4 ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 650]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:5678/webhook/solomond-module1-detailed",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json }}",
        "options": {
          "timeout": 300000
        }
      },
      "id": "trigger_module_workflow",
      "name": "âš¡ ëª¨ë“ˆ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [900, 400]
    },
    {
      "parameters": {
        "jsCode": "// ğŸ“‹ ë§ˆìŠ¤í„° ì‹¤í–‰ ë¡œê·¸ ë° ìƒíƒœ ì¶”ì \nconst decision = $input.first().json;\nconst moduleResult = $input.all()[1] ? $input.all()[1].json : null;\n\nconst masterLog = {\n  timestamp: new Date().toISOString(),\n  session_id: decision.request_id,\n  master_decision: {\n    module_selected: decision.routing_decision.selected_module,\n    ai_model: decision.routing_decision.ai_model,\n    reasoning: decision.routing_decision.reasoning,\n    execution_time: new Date() - new Date(decision.timestamp)\n  },\n  module_execution: {\n    status: moduleResult ? 'completed' : 'in_progress',\n    result_preview: moduleResult ? Object.keys(moduleResult).slice(0, 5) : null\n  },\n  next_steps: {\n    dual_brain_pending: true,\n    google_calendar_pending: decision.analysis_config.google_calendar_integration,\n    estimated_completion: new Date(Date.now() + 10*60*1000).toISOString()\n  },\n  system_metrics: {\n    total_files_processed: decision.file_analysis.total_files,\n    analysis_strategy: decision.routing_decision.analysis_strategy,\n    resource_priority: decision.resource_allocation.priority\n  }\n};\n\nreturn masterLog;"
      },
      "id": "master_status_tracker",
      "name": "ğŸ“Š ë§ˆìŠ¤í„° ìƒíƒœ ì¶”ì ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1120, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"status\": \"orchestration_complete\", \"message\": \"SOLOMOND AI ë§ˆìŠ¤í„° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì™„ë£Œ\", \"session_id\": $json.session_id, \"module_executed\": $json.master_decision.module_selected, \"ai_model\": $json.master_decision.ai_model, \"reasoning\": $json.master_decision.reasoning, \"next_workflow\": \"dual_brain_system\", \"estimated_completion\": $json.next_steps.estimated_completion } }}"
      },
      "id": "master_response",
      "name": "âœ… ë§ˆìŠ¤í„° ì‘ë‹µ",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1340, 400]
    }
  ],
  "connections": {
    "ğŸš€ SOLOMOND ìš”ì²­ ìˆ˜ì‹ ": {
      "main": [
        [
          {
            "node": "ğŸ§  ì§€ëŠ¥ì  ëª¨ë“ˆ ë¼ìš°í„°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ§  ì§€ëŠ¥ì  ëª¨ë“ˆ ë¼ìš°í„°": {
      "main": [
        [
          {
            "node": "ğŸ“Š Module1 ë¶„ê¸°",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ•·ï¸ Module2 ë¶„ê¸°",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ’ Module3 ë¶„ê¸°",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ—ï¸ Module4 ë¶„ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š Module1 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "âš¡ ëª¨ë“ˆ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ•·ï¸ Module2 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "âš¡ ëª¨ë“ˆ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ’ Module3 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "âš¡ ëª¨ë“ˆ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ—ï¸ Module4 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "âš¡ ëª¨ë“ˆ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ ëª¨ë“ˆ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰": {
      "main": [
        [
          {
            "node": "ğŸ“Š ë§ˆìŠ¤í„° ìƒíƒœ ì¶”ì ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š ë§ˆìŠ¤í„° ìƒíƒœ ì¶”ì ": {
      "main": [
        [
          {
            "node": "âœ… ë§ˆìŠ¤í„° ì‘ë‹µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {},
  "meta": {
    "templateCredsSetupCompleted": true
  }
}