{
  "name": "ğŸ§ ğŸ§  Dual Brain Common Workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "dual-brain-system",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "dual_brain_trigger",
      "name": "ğŸ§  ë“€ì–¼ ë¸Œë ˆì¸ í™œì„±í™”",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [240, 400]
    },
    {
      "parameters": {
        "jsCode": "// ğŸ§  ë“€ì–¼ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ - ë¶„ì„ ì™„ë£Œ ë°ì´í„° ì²˜ë¦¬ ë° ì „ëµ ìˆ˜ë¦½\nconst analysisData = $input.first().json;\n\n// 1. ë¶„ì„ ê²°ê³¼ ê²€ì¦ ë° ë¶„ë¥˜\nconst dataValidation = {\n  timestamp: new Date().toISOString(),\n  session_id: analysisData.session_id || analysisData.request_id,\n  analysis_quality: {\n    has_valid_results: !!(analysisData.success_status === 'success'),\n    quality_score: analysisData.quality_score || analysisData.quality_metrics?.overall_score || 0,\n    modalities_count: analysisData.modalities_processed || analysisData.processing_summary?.total_modalities || 0,\n    ai_model_used: analysisData.ai_model || analysisData.processing_summary?.ai_model_used || 'unknown'\n  },\n  content_analysis: {\n    has_conference_content: !!(analysisData.module === 'conference_analysis' || analysisData.selected_module === 'module1'),\n    content_type: analysisData.analysis_strategy || analysisData.routing_decision?.analysis_strategy || 'standard',\n    file_count: analysisData.file_analysis?.total_files || 0\n  }\n};\n\n// 2. êµ¬ê¸€ ìº˜ë¦°ë” ì—°ë™ ì˜ì‚¬ê²°ì •\nconst calendarDecision = {\n  should_create_event: false,\n  reasoning: [],\n  event_details: null\n};\n\n// ìº˜ë¦°ë” ìƒì„± ì¡°ê±´ ê²€ì¦\nif (dataValidation.analysis_quality.has_valid_results) {\n  calendarDecision.should_create_event = true;\n  calendarDecision.reasoning.push('ë¶„ì„ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë¨');\n  \n  if (dataValidation.analysis_quality.quality_score > 80) {\n    calendarDecision.reasoning.push(`ë†’ì€ í’ˆì§ˆ ì ìˆ˜ (${dataValidation.analysis_quality.quality_score}ì )`);\n  }\n  \n  if (dataValidation.content_analysis.has_conference_content) {\n    calendarDecision.reasoning.push('ì»¨í¼ëŸ°ìŠ¤ ë¶„ì„ ë‚´ìš© í¬í•¨');\n  }\n  \n  // ìº˜ë¦°ë” ì´ë²¤íŠ¸ ì„¸ë¶€ì‚¬í•­ ìƒì„±\n  calendarDecision.event_details = {\n    title: `${analysisData.analysis_title || 'ì»¨í¼ëŸ°ìŠ¤ ë¶„ì„'} - ì™„ë£Œ`,\n    description: `SOLOMOND AI ë¶„ì„ ì™„ë£Œ\\n\\n` +\n                `â€¢ í’ˆì§ˆ ì ìˆ˜: ${dataValidation.analysis_quality.quality_score}ì \\n` +\n                `â€¢ ì²˜ë¦¬ëœ íŒŒì¼: ${dataValidation.content_analysis.file_count}ê°œ\\n` +\n                `â€¢ AI ëª¨ë¸: ${dataValidation.analysis_quality.ai_model_used}\\n` +\n                `â€¢ ë¶„ì„ ìœ í˜•: ${dataValidation.content_analysis.content_type}\\n\\n` +\n                `ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ AI ì¸ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.`,\n    start_time: new Date().toISOString(),\n    end_time: new Date(Date.now() + 60*60*1000).toISOString(), // 1ì‹œê°„ í›„\n    attendees: ['solomond.jgh@gmail.com']\n  };\n} else {\n  calendarDecision.reasoning.push('ë¶„ì„ í’ˆì§ˆì´ ê¸°ì¤€ì— ë¯¸ë‹¬');\n  calendarDecision.reasoning.push(`í’ˆì§ˆ ì ìˆ˜: ${dataValidation.analysis_quality.quality_score}ì `);\n}\n\n// 3. AI ì¸ì‚¬ì´íŠ¸ ìƒì„± ì˜ì‚¬ê²°ì •\nconst insightsDecision = {\n  should_generate_insights: dataValidation.analysis_quality.has_valid_results,\n  insight_types: [],\n  analysis_focus: []\n};\n\nif (insightsDecision.should_generate_insights) {\n  // ë¶„ì„ ìœ í˜•ì— ë”°ë¥¸ ì¸ì‚¬ì´íŠ¸ ì „ëµ\n  if (dataValidation.content_analysis.has_conference_content) {\n    insightsDecision.insight_types.push('ì‹œê°„_íŒ¨í„´_ë¶„ì„');\n    insightsDecision.insight_types.push('ì£¼ì œ_íŠ¸ë Œë“œ_ë¶„ì„');\n    insightsDecision.insight_types.push('ì„±ê³¼_ë¶„ì„');\n    insightsDecision.analysis_focus.push('ì»¨í¼ëŸ°ìŠ¤ ì£¼ì œë³„ íŠ¸ë Œë“œ');\n    insightsDecision.analysis_focus.push('ë°œí‘œ í’ˆì§ˆ ë° ì°¸ì—¬ë„');\n  }\n  \n  // í’ˆì§ˆ ì ìˆ˜ì— ë”°ë¥¸ ì‹¬í™” ë¶„ì„\n  if (dataValidation.analysis_quality.quality_score > 90) {\n    insightsDecision.insight_types.push('ë¯¸ë˜_ì˜ˆì¸¡_ë¶„ì„');\n    insightsDecision.insight_types.push('ê°œì¸í™”_ì¶”ì²œ');\n    insightsDecision.analysis_focus.push('í–¥í›„ ê°œì„  ë°©í–¥ ì œì‹œ');\n  }\n}\n\n// 4. ë“€ì–¼ ë¸Œë ˆì¸ ì‹¤í–‰ ê³„íš\nconst dualBrainPlan = {\n  timestamp: dataValidation.timestamp,\n  session_id: dataValidation.session_id,\n  execution_strategy: {\n    calendar_integration: calendarDecision,\n    ai_insights: insightsDecision,\n    parallel_execution: true,\n    timeout_seconds: 120\n  },\n  data_pipeline: {\n    source_data: analysisData,\n    processed_metadata: dataValidation,\n    next_steps: ['calendar_sync', 'insight_generation', 'pattern_analysis']\n  },\n  success_criteria: {\n    calendar_event_created: calendarDecision.should_create_event,\n    insights_generated: insightsDecision.should_generate_insights,\n    pattern_detection: true,\n    user_notification: true\n  }\n};\n\nreturn dualBrainPlan;"
      },
      "id": "dual_brain_orchestrator",
      "name": "ğŸ¯ ë“€ì–¼ ë¸Œë ˆì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 400]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.execution_strategy.calendar_integration.should_create_event }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equal"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "calendar_gate",
      "name": "ğŸ“… ìº˜ë¦°ë” ì—°ë™ ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.execution_strategy.ai_insights.should_generate_insights }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equal"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "insights_gate",
      "name": "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 500]
    },
    {
      "parameters": {
        "jsCode": "// ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” ì—°ë™ ì˜ì‚¬ê²°ì • ë° ì‹¤í–‰ ë¡œì§\nconst dualBrainData = $input.first().json;\nconst calendarConfig = dualBrainData.execution_strategy.calendar_integration;\n\n// 1. ìº˜ë¦°ë” ì´ë²¤íŠ¸ ìƒì„± ë¡œì§\nconst calendarExecution = {\n  timestamp: new Date().toISOString(),\n  session_id: dualBrainData.session_id,\n  action: 'google_calendar_integration',\n  decision_reasoning: calendarConfig.reasoning,\n  \n  // ì‚¬ìš©ì í™•ì¸ í”„ë¡œì„¸ìŠ¤\n  user_confirmation: {\n    required: true,\n    message: `ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. êµ¬ê¸€ ìº˜ë¦°ë”ì— ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\n` +\n             `ğŸ“Š ë¶„ì„ ê²°ê³¼:\\n${calendarConfig.reasoning.join('\\n')}\\n\\n` +\n             `ğŸ“… ìƒì„±ë  ì´ë²¤íŠ¸:\\nì œëª©: ${calendarConfig.event_details.title}\\n` +\n             `ì‹œê°„: ${new Date(calendarConfig.event_details.start_time).toLocaleString('ko-KR')}`,\n    timeout_minutes: 10\n  },\n  \n  // êµ¬ê¸€ ìº˜ë¦°ë” API í˜¸ì¶œ ì„¤ì •\n  calendar_api_config: {\n    calendar_id: 'primary',\n    event_data: {\n      summary: calendarConfig.event_details.title,\n      description: calendarConfig.event_details.description,\n      start: {\n        dateTime: calendarConfig.event_details.start_time,\n        timeZone: 'Asia/Seoul'\n      },\n      end: {\n        dateTime: calendarConfig.event_details.end_time,\n        timeZone: 'Asia/Seoul'\n      },\n      attendees: calendarConfig.event_details.attendees.map(email => ({email})),\n      reminders: {\n        useDefault: false,\n        overrides: [\n          {method: 'email', minutes: 60},\n          {method: 'popup', minutes: 10}\n        ]\n      }\n    }\n  },\n  \n  // ì‹¤í–‰ í›„ ê²€ì¦ ê¸°ì¤€\n  success_criteria: {\n    event_created: true,\n    event_id_returned: true,\n    email_notification_sent: true,\n    user_feedback_collected: false // ì¶”í›„ êµ¬í˜„\n  },\n  \n  // ì‹¤íŒ¨ ì‹œ í´ë°± ì „ëµ\n  fallback_strategy: {\n    retry_attempts: 2,\n    alternative_calendar: 'solomond.jgh@gmail.com',\n    offline_storage: true,\n    user_notification: 'ìº˜ë¦°ë” ì—°ë™ì— ì‹¤íŒ¨í–ˆì§€ë§Œ ë¶„ì„ ê²°ê³¼ëŠ” ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.'\n  }\n};\n\nreturn calendarExecution;"
      },
      "id": "calendar_integration_logic",
      "name": "ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” í†µí•© ë¡œì§",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 250]
    },
    {
      "parameters": {
        "jsCode": "// ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ìƒì„± ì˜ì‚¬ê²°ì • ë° ì‹¤í–‰ ë¡œì§\nconst dualBrainData = $input.first().json;\nconst insightsConfig = dualBrainData.execution_strategy.ai_insights;\n\n// 1. ì¸ì‚¬ì´íŠ¸ ìƒì„± ì „ëµ ì„¸ë¶€í™”\nconst insightsExecution = {\n  timestamp: new Date().toISOString(),\n  session_id: dualBrainData.session_id,\n  action: 'ai_insights_generation',\n  \n  // 6ê°€ì§€ íŒ¨í„´ íƒì§€ ì „ëµ\n  pattern_detection_config: {\n    time_patterns: {\n      enabled: insightsConfig.insight_types.includes('ì‹œê°„_íŒ¨í„´_ë¶„ì„'),\n      analysis_focus: ['ë¶„ì„ ë¹ˆë„', 'ì‹œê°„ëŒ€ë³„ ì„±ê³¼', 'ì£¼ê¸°ì„± íƒì§€'],\n      lookback_days: 30\n    },\n    content_patterns: {\n      enabled: insightsConfig.insight_types.includes('ì£¼ì œ_íŠ¸ë Œë“œ_ë¶„ì„'),\n      analysis_focus: ['í‚¤ì›Œë“œ ë¹ˆë„', 'ì£¼ì œ ë³€í™”', 'íŠ¸ë Œë“œ ë°©í–¥'],\n      topic_modeling: true\n    },\n    performance_patterns: {\n      enabled: insightsConfig.insight_types.includes('ì„±ê³¼_ë¶„ì„'),\n      analysis_focus: ['í’ˆì§ˆ ì ìˆ˜ ë³€í™”', 'ì„±ê³µë¥  ì¶”ì´', 'íš¨ìœ¨ì„± ê°œì„ '],\n      benchmark_comparison: true\n    },\n    correlation_patterns: {\n      enabled: true,\n      analysis_focus: ['íŒŒì¼ ìœ í˜•ë³„ ì„±ê³¼', 'ì‹œê°„-í’ˆì§ˆ ìƒê´€ê´€ê³„', 'ëª¨ë‹¬ë¦¬í‹° ì¡°í•© íš¨ê³¼'],\n      statistical_significance: 0.05\n    },\n    anomaly_patterns: {\n      enabled: true,\n      analysis_focus: ['ì´ìƒ ì ìˆ˜ íƒì§€', 'í’ˆì§ˆ ê¸‰ë³€ êµ¬ê°„', 'ì˜ˆì™¸ì  ì„±ê³¼'],\n      sensitivity: 'medium'\n    },\n    opportunity_patterns: {\n      enabled: insightsConfig.insight_types.includes('ë¯¸ë˜_ì˜ˆì¸¡_ë¶„ì„'),\n      analysis_focus: ['ê°œì„  ê¸°íšŒ', 'ìµœì í™” í¬ì¸íŠ¸', 'í™•ì¥ ê°€ëŠ¥ì„±'],\n      future_horizon_days: 60\n    }\n  },\n  \n  // AI ëª¨ë¸ í™œìš© ì „ëµ\n  ai_processing_strategy: {\n    primary_model: dualBrainData.data_pipeline.source_data.ai_model || 'qwen2.5:7b',\n    model_selection_reasoning: [\n      'qwen2.5:7b ì„ íƒ: íŒ¨í„´ ë¶„ì„ ë° ì¸ì‚¬ì´íŠ¸ ìƒì„±ì— ìµœì í™”',\n      'í•œêµ­ì–´ ì»¨í…ìŠ¤íŠ¸ ì´í•´ë„ ìš°ìˆ˜',\n      'ì£¼ì–¼ë¦¬ ì—…ê³„ ë„ë©”ì¸ ì§€ì‹ í™œìš©'\n    ],\n    prompt_engineering: {\n      context_setup: 'ì£¼ì–¼ë¦¬ ì—…ê³„ SOLOMOND AI ì‹œìŠ¤í…œì˜ ë¶„ì„ íŒ¨í„´ ì „ë¬¸ê°€',\n      analysis_directive: insightsConfig.analysis_focus,\n      output_format: 'êµ¬ì¡°í™”ëœ ì¸ì‚¬ì´íŠ¸ + ì‹¤í–‰ ê°€ëŠ¥í•œ ì¶”ì²œì‚¬í•­',\n      creativity_balance: 0.7 // ì°½ì˜ì„±ê³¼ ì •í™•ì„± ê· í˜•\n    }\n  },\n  \n  // ê°œì¸í™” ì¶”ì²œ ì‹œìŠ¤í…œ\n  personalization_config: {\n    enabled: insightsConfig.insight_types.includes('ê°œì¸í™”_ì¶”ì²œ'),\n    user_profile: {\n      analysis_history: 'ê¸°ì¡´ ë¶„ì„ íŒ¨í„´ í™œìš©',\n      preference_learning: 'ì‚¬ìš©ì í”¼ë“œë°± ê¸°ë°˜',\n      domain_expertise: 'ì£¼ì–¼ë¦¬ ì—…ê³„ ì „ë¬¸ì„±'\n    },\n    recommendation_types: [\n      'ë‹¤ìŒ ë¶„ì„ ìµœì  ì‹œì  ì œì•ˆ',\n      'íŒŒì¼ ì—…ë¡œë“œ í’ˆì§ˆ ê°œì„  ë°©ì•ˆ',\n      'ë¶„ì„ íš¨ìœ¨ì„± í–¥ìƒ íŒ',\n      'íŠ¸ë Œë“œ ê¸°ë°˜ ì£¼ëª© ì˜ì—­'\n    ]\n  },\n  \n  // ì¸ì‚¬ì´íŠ¸ í’ˆì§ˆ ë³´ì¥\n  quality_assurance: {\n    confidence_threshold: 0.8,\n    evidence_requirement: 'ìµœì†Œ 3ê°œ ë°ì´í„° í¬ì¸íŠ¸',\n    statistical_validation: true,\n    human_review_trigger: 'ì‹ ë¢°ë„ < 0.6 ë˜ëŠ” ìƒˆë¡œìš´ íŒ¨í„´ ë°œê²¬'\n  },\n  \n  // ê²°ê³¼ ì „ë‹¬ ì „ëµ\n  output_strategy: {\n    primary_format: 'ì‹œê°í™” + í…ìŠ¤íŠ¸ ì„¤ëª…',\n    actionable_items: 'êµ¬ì²´ì  ì‹¤í–‰ ë°©ì•ˆ í¬í•¨',\n    trend_visualization: 'Plotly ì°¨íŠ¸ ìƒì„±',\n    summary_levels: ['ê²½ì˜ì§„ìš© ìš”ì•½', 'ì‹¤ë¬´ì§„ìš© ìƒì„¸', 'ê¸°ìˆ ì§„ìš© ì‹¬í™”']\n  }\n};\n\nreturn insightsExecution;"
      },
      "id": "ai_insights_logic",
      "name": "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ìƒì„± ë¡œì§",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 450]
    },
    {
      "parameters": {
        "resource": "event",
        "operation": "create",
        "calendarId": {
          "__rl": true,
          "value": "primary",
          "mode": "list"
        },
        "summary": "={{ $json.calendar_api_config.event_data.summary }}",
        "description": "={{ $json.calendar_api_config.event_data.description }}",
        "startDate": "={{ $json.calendar_api_config.event_data.start.dateTime }}",
        "endDate": "={{ $json.calendar_api_config.event_data.end.dateTime }}",
        "additionalFields": {
          "attendees": "={{ $json.calendar_api_config.event_data.attendees.map(a => a.email).join(',') }}"
        }
      },
      "id": "google_calendar_api",
      "name": "ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” API í˜¸ì¶œ",
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 2,
      "position": [1120, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:8580/api/generate-insights",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "ai_insights_api",
      "name": "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ API í˜¸ì¶œ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1120, 400]
    },
    {
      "parameters": {
        "jsCode": "// ğŸ† ë“€ì–¼ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì‹¤í–‰ ê²°ê³¼ í†µí•© ë° ì„±ê³µ í‰ê°€\nconst originalPlan = $input.first().json;\nconst calendarResult = $input.all()[1] ? $input.all()[1].json : null;\nconst insightsResult = $input.all()[2] ? $input.all()[2].json : null;\n\n// 1. ì‹¤í–‰ ê²°ê³¼ ë¶„ì„\nconst executionResults = {\n  timestamp: new Date().toISOString(),\n  session_id: originalPlan.session_id,\n  \n  calendar_integration: {\n    attempted: originalPlan.execution_strategy.calendar_integration.should_create_event,\n    successful: !!(calendarResult && calendarResult.id),\n    event_id: calendarResult ? calendarResult.id : null,\n    event_link: calendarResult ? calendarResult.htmlLink : null,\n    error_info: calendarResult ? calendarResult.error : null\n  },\n  \n  ai_insights: {\n    attempted: originalPlan.execution_strategy.ai_insights.should_generate_insights,\n    successful: !!(insightsResult && insightsResult.insights),\n    insights_count: insightsResult ? (insightsResult.insights ? Object.keys(insightsResult.insights).length : 0) : 0,\n    patterns_detected: insightsResult ? (insightsResult.patterns_detected || 0) : 0,\n    recommendations_generated: insightsResult ? (insightsResult.recommendations ? insightsResult.recommendations.length : 0) : 0\n  }\n};\n\n// 2. ì„±ê³µë¥  ê³„ì‚°\nconst successMetrics = {\n  overall_success_rate: 0,\n  component_success: {\n    calendar: executionResults.calendar_integration.successful ? 1 : 0,\n    insights: executionResults.ai_insights.successful ? 1 : 0\n  },\n  attempted_components: (\n    (executionResults.calendar_integration.attempted ? 1 : 0) +\n    (executionResults.ai_insights.attempted ? 1 : 0)\n  )\n};\n\nif (successMetrics.attempted_components > 0) {\n  const successful_components = Object.values(successMetrics.component_success).reduce((a, b) => a + b, 0);\n  successMetrics.overall_success_rate = (successful_components / successMetrics.attempted_components) * 100;\n}\n\n// 3. ì‚¬ìš©ì ì•Œë¦¼ ë©”ì‹œì§€ ìƒì„±\nconst userNotification = {\n  title: 'ğŸ§  ë“€ì–¼ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì‹¤í–‰ ì™„ë£Œ',\n  summary: `ì„±ê³µë¥ : ${successMetrics.overall_success_rate.toFixed(1)}% (${Object.values(successMetrics.component_success).reduce((a, b) => a + b, 0)}/${successMetrics.attempted_components}ê°œ ì„±ê³µ)`,\n  details: []\n};\n\nif (executionResults.calendar_integration.attempted) {\n  if (executionResults.calendar_integration.successful) {\n    userNotification.details.push(\n      `âœ… êµ¬ê¸€ ìº˜ë¦°ë”: ì´ë²¤íŠ¸ ìƒì„± ì„±ê³µ (${executionResults.calendar_integration.event_id})`\n    );\n  } else {\n    userNotification.details.push(\n      `âŒ êµ¬ê¸€ ìº˜ë¦°ë”: ì´ë²¤íŠ¸ ìƒì„± ì‹¤íŒ¨ - ${executionResults.calendar_integration.error_info || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`\n    );\n  }\n}\n\nif (executionResults.ai_insights.attempted) {\n  if (executionResults.ai_insights.successful) {\n    userNotification.details.push(\n      `âœ… AI ì¸ì‚¬ì´íŠ¸: ${executionResults.ai_insights.insights_count}ê°œ ì¸ì‚¬ì´íŠ¸, ${executionResults.ai_insights.patterns_detected}ê°œ íŒ¨í„´, ${executionResults.ai_insights.recommendations_generated}ê°œ ì¶”ì²œì‚¬í•­ ìƒì„±`\n    );\n  } else {\n    userNotification.details.push(\n      `âŒ AI ì¸ì‚¬ì´íŠ¸: ìƒì„± ì‹¤íŒ¨`\n    );\n  }\n}\n\n// 4. ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´\nconst nextSteps = {\n  immediate_actions: [],\n  future_opportunities: []\n};\n\nif (executionResults.calendar_integration.successful) {\n  nextSteps.immediate_actions.push('ìº˜ë¦°ë”ì—ì„œ ë¶„ì„ ê²°ê³¼ í™•ì¸ ë° ì¼ì • ì¡°ì •');\n  nextSteps.future_opportunities.push('ì •ê¸°ì ì¸ ë¶„ì„ ì¼ì • ì„¤ì •');\n}\n\nif (executionResults.ai_insights.successful) {\n  nextSteps.immediate_actions.push('AI ì¸ì‚¬ì´íŠ¸ ë¦¬í¬íŠ¸ ê²€í†  ë° ì•¡ì…˜ ì•„ì´í…œ ì‹¤í–‰');\n  nextSteps.future_opportunities.push('íŒ¨í„´ ê¸°ë°˜ ì „ëµ ìˆ˜ë¦½');\n}\n\n// 5. ìµœì¢… ë“€ì–¼ ë¸Œë ˆì¸ ì‹¤í–‰ ë³´ê³ ì„œ\nconst finalReport = {\n  session_summary: {\n    session_id: originalPlan.session_id,\n    execution_time: new Date() - new Date(originalPlan.timestamp),\n    components_executed: successMetrics.attempted_components,\n    success_rate: successMetrics.overall_success_rate\n  },\n  detailed_results: executionResults,\n  success_metrics: successMetrics,\n  user_notification: userNotification,\n  next_steps: nextSteps,\n  system_status: {\n    dual_brain_health: successMetrics.overall_success_rate > 50 ? 'healthy' : 'needs_attention',\n    recommendations_for_improvement: successMetrics.overall_success_rate < 100 ? [\n      'ì‹œìŠ¤í…œ ì—°ê²° ìƒíƒœ ì ê²€',\n      'ì¸ì¦ ì •ë³´ ê°±ì‹  í™•ì¸',\n      'ì„œë¹„ìŠ¤ ê°€ìš©ì„± ëª¨ë‹ˆí„°ë§'\n    ] : ['ì‹œìŠ¤í…œ ì •ìƒ ì‘ë™ ì¤‘']\n  }\n};\n\nreturn finalReport;"
      },
      "id": "dual_brain_final_integration",
      "name": "ğŸ† ë“€ì–¼ ë¸Œë ˆì¸ í†µí•© ì™„ë£Œ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1340, 400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"status\": \"dual_brain_complete\", \"message\": \"ë“€ì–¼ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì‹¤í–‰ ì™„ë£Œ\", \"session_id\": $json.session_summary.session_id, \"success_rate\": $json.success_metrics.overall_success_rate, \"calendar_success\": $json.detailed_results.calendar_integration.successful, \"insights_success\": $json.detailed_results.ai_insights.successful, \"user_notification\": $json.user_notification, \"next_steps\": $json.next_steps, \"system_health\": $json.system_status.dual_brain_health, \"detailed_report\": $json } }}"
      },
      "id": "dual_brain_response",
      "name": "âœ… ë“€ì–¼ ë¸Œë ˆì¸ ì™„ë£Œ ì‘ë‹µ",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1560, 400]
    }
  ],
  "connections": {
    "ğŸ§  ë“€ì–¼ ë¸Œë ˆì¸ í™œì„±í™”": {
      "main": [
        [
          {
            "node": "ğŸ¯ ë“€ì–¼ ë¸Œë ˆì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¯ ë“€ì–¼ ë¸Œë ˆì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°": {
      "main": [
        [
          {
            "node": "ğŸ“… ìº˜ë¦°ë” ì—°ë™ ë¶„ê¸°",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ë¶„ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“… ìº˜ë¦°ë” ì—°ë™ ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” í†µí•© ë¡œì§",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ìƒì„± ë¡œì§",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” í†µí•© ë¡œì§": {
      "main": [
        [
          {
            "node": "ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” API í˜¸ì¶œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ ìƒì„± ë¡œì§": {
      "main": [
        [
          {
            "node": "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ API í˜¸ì¶œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“… êµ¬ê¸€ ìº˜ë¦°ë” API í˜¸ì¶œ": {
      "main": [
        [
          {
            "node": "ğŸ† ë“€ì–¼ ë¸Œë ˆì¸ í†µí•© ì™„ë£Œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ§  AI ì¸ì‚¬ì´íŠ¸ API í˜¸ì¶œ": {
      "main": [
        [
          {
            "node": "ğŸ† ë“€ì–¼ ë¸Œë ˆì¸ í†µí•© ì™„ë£Œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ† ë“€ì–¼ ë¸Œë ˆì¸ í†µí•© ì™„ë£Œ": {
      "main": [
        [
          {
            "node": "âœ… ë“€ì–¼ ë¸Œë ˆì¸ ì™„ë£Œ ì‘ë‹µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {},
  "meta": {
    "templateCredsSetupCompleted": true
  }
}